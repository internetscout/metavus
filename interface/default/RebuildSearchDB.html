<?PHP
#
#   FILE:  RebuildSearchDB.html
#
#   Part of the Metavus digital collections platform
#   Copyright 2011-2020 Edward Almasy and Internet Scout Research Group
#   http://metavus.net
#
#   @scout:phpstan

# ----- MAIN -----------------------------------------------------------------

if (!isset($H_RebuildIsComplete)) {
    throw new Exception("Variable \$H_RebuildIsComplete not set.");
}

if ($H_RebuildIsComplete) { ?>
<h1>Search Database Rebuild Complete</h1>

<p>The search database has been rebuilt successfully.</p>

    <?PHP return;
}
if (!isset($H_PercentRebuildComplete)) {
    throw new Exception("Variable \$H_PercentRebuildComplete not set.");
}
if (!isset($H_EstimatedTimeRemaining)) {
    throw new Exception("Variable \$H_EstimatedTimeRemaining not set.");
}
if (!isset($H_EstimatedTimeOfCompletion)) {
    throw new Exception("Variable \$H_EstimatedTimeOfCompletion not set.");
}
?>
<h1>Rebuilding Search Database</h1>

<table class="table table-striped">
    <tbody>
        <tr>
            <th>Percent Complete</th>
            <td><?= $H_PercentRebuildComplete;  ?>%</td>
        </tr>
        <tr>
            <th>Time Remaining</th>
            <td><?= $H_EstimatedTimeRemaining; ?> (estimated)</td>
        </tr>
        <tr>
            <th>Time of Completion</th>
            <td><?= $H_EstimatedTimeOfCompletion; ?> (estimated)</td>
        </tr>
    </tbody>
</table>
