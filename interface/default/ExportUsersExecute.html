<?PHP
#
#   FILE:  ExportUsersExecute.html
#
#   Part of the Metavus digital collections platform
#   Copyright 2011-2025 Edward Almasy and Internet Scout Research Group
#   http://metavus.net
#
# @scout:phpstan

namespace Metavus;

use Exception;

# ----- SETUP ----------------------------------------------------------------
if (!isset($H_ExportComplete)) {
    throw new Exception("H_ExportComplete not defined.");
}
if (!isset($H_FileName)) {
    throw new Exception("H_FileName not defined.");
}
if (!isset($H_UserCount)) {
    throw new Exception("H_UserCount not defined.");
}

$CancelButton = new HtmlButton("Cancel");
$CancelButton->setIcon("Cross.svg");
$CancelButton->addSemanticClass("btn-danger");

# ----- DISPLAY --------------------------------------------------------------
?>

<?PHP if ($H_ExportComplete) { ?>
<h1>Export Completed Successfully</h1>

<p><?= $H_UserCount; ?> users exported.</p>

<p>Download the exported file by clicking <a href="<?= $H_FileName;?>" download>here</a>.</p>

<?PHP } else { ?>
<h1>Exporting Users</h1>

<p><?= $H_UserCount; ?> users exported so far.</p>

<form name="exportusers" method="post" action="index.php?P=ExportUsersExecute">
    <?= $CancelButton->getHtml(); ?>
</form>

<?PHP } ?>
